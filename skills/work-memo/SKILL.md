---
name: work-memo
description: >
  プロジェクトの作業メモ（作業メモ.md）を自動管理する。
  タスク完了時・新規タスク発生時・セッション開始時に作業メモを更新し、
  人間が「今何をすべきか」を常に把握できる状態を維持する。
  Use when user mentions メモ更新, 作業メモ, TODO確認, 次やること, 進捗確認,
  or when a task is completed and the memo needs updating.
  Avoid using for code implementation, debugging, or file operations unrelated to task tracking.
allowed-tools: "Read, Write, Edit, Glob"
metadata:
  author: "user"
  version: "1.0.0"
  category: "workflow"
  tags: ["memo", "todo", "task-management", "workflow"]
---

# Work Memo - 作業メモ自動管理スキル

Claude Code と人間が共同作業する際に、「今何をすべきか」を常に明確にするためのスキル。

---

## 目的 / Scope

| 機能 | 説明 |
|------|------|
| メモ自動更新 | タスク完了・追加時に作業メモ.mdを更新 |
| セッション開始確認 | 前回の状態を読み込み、現在地を提示 |
| 待ちタスクの明示 | 「誰が」「何を」待っているか明確化 |
| 完了記録 | 完了したタスクを日付付きで記録 |

### 対象外

- コード実装やデバッグ
- ファイル操作（メモ以外）
- プロジェクト設計

---

## いつ起動するか（Trigger）

### 自動トリガー（Claude Codeが自主的に実行すべき場面）

1. **タスクが完了した時** → 作業メモのチェックリストを更新
2. **新しいタスクが発生した時** → 作業メモに追記
3. **PMから新しい指示が来た時** → 作業メモに反映
4. **待ち状態が変わった時** → 待ちタスクの状態を更新

### 手動トリガー（ユーザーが依頼する場面）

- 「メモ更新して」
- 「今何やればいい？」
- 「進捗確認して」
- 「次やること教えて」

---

## 作業メモ.md のフォーマット

```markdown
# 作業メモ（あなたのTODO）

## 現在のステータス
- [プロジェクトの現在地を1-2行で]

---

## やること

### 優先度：高
- [ ] タスク内容 → 具体的なアクション
- [ ] タスク内容 → 具体的なアクション

### 優先度：中
- [ ] タスク内容 → 具体的なアクション

### 優先度：低（後でOK）
- [ ] タスク内容

---

## 待ち状態
- [ ] 誰から何を待っているか

---

## 完了済み
- [x] タスク内容（完了日: MM/DD）

---

## メモ
- 覚えておくべきこと
```

---

## 実行手順（Workflow）

### Step 1: 作業メモの検出

プロジェクトルートで `作業メモ.md` を探す。

```
Glob: **/作業メモ.md
```

なければ新規作成する。

### Step 2: 現在の状態を読み込む

作業メモ.md を Read で読み込み、以下を確認：
- 未完了タスクの数
- 待ち状態のタスク
- 最終更新日

### Step 3: 更新内容の判定

| トリガー | 更新内容 |
|---------|---------|
| タスク完了 | `- [ ]` → `- [x]`（完了日追記）、完了済みセクションへ移動 |
| 新タスク発生 | 適切な優先度に `- [ ]` を追加 |
| PM指示 | やることに反映 + 待ち状態を更新 |
| セッション開始 | ステータスを更新、期限切れの確認 |

### Step 4: 更新の実行

Edit ツールで作業メモ.md を更新する。

### Step 5: ユーザーへの報告

更新後、変更点を簡潔に報告：
```
作業メモを更新しました。
- 完了: ○○
- 追加: △△
- 次にやること: □□
```

---

## 更新ルール

### 必ず守ること

1. **タスクは具体的に書く**
   - NG: 「記事を準備する」
   - OK: 「既存@IT記事（過去数週分）を /Users/work/＠IT/ に .txt で配置」

2. **誰のタスクか明確にする**
   - ユーザーのタスク → 「やること」セクション
   - Claude Codeのタスク → TodoWriteで管理（作業メモには書かない）
   - PMのタスク → 「待ち状態」セクション

3. **完了したら即更新**
   - タスク完了後、次のレスポンスまでに更新

4. **優先度は3段階**
   - 高: 今すぐやるべき
   - 中: 今週中にやるべき
   - 低: 余裕がある時でOK

---

## 品質ゲート

- [ ] 未完了タスクが1つ以上ある（やることがないなら「待ち」と明記）
- [ ] 各タスクに具体的なアクションが書かれている
- [ ] 待ち状態が正確に反映されている
- [ ] 完了タスクに日付が入っている

---

## 例

### 例1: タスク完了時

**トリガー**: 「picker.pyの拡張が完了した」

**更新**:
```diff
- - [ ] picker.pyを複数サイト対応に拡張
+ - [x] picker.pyを複数サイト対応に拡張（完了: 02/06）
```

### 例2: PM指示受領時

**トリガー**: 「PMから6サイト振り分けの要件変更が来た」

**更新**:
```diff
+ ### 優先度：高
+ - [ ] 6サイト分のキーワード設定を作成
+ - [ ] picker.pyを複数サイト対応に拡張
```

### 例3: セッション開始時

**出力**:
```
作業メモを確認しました。
- 未完了タスク: 3件
- 待ち: PMからの記事共有（2/5〜）
- 次にやること: 既存@IT記事を /Users/work/＠IT/ に配置
```
